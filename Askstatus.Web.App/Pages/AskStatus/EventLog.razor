@page "/admin/system/system-log"
@using Askstatus.Common.System
@using System.Globalization
@attribute [Authorize(Permissions.System)]

<PageTitle>Askstatus - Event Log</PageTitle>

<MudDataGrid @ref="_dataGrid" T="SystemLogDto" ServerData="ServerReload" Filterable="false">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Event Log</MudText>
        <MudSpacer />
        <MudTextField T="string" ValueChanged="@(s=>OnSearch(s))" Placeholder="Search" Adornment="Adornment.Start"
                      AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
    </ToolBarContent>
    <Columns>
        <PropertyColumn Property="x => x.CreatedAt" Format="yyyy-MM-dd HH:mm:ss" />
        <PropertyColumn Property="x => x.EventType" />
        <PropertyColumn Property="x => x.User" />
        <PropertyColumn Property="x => x.Message" />
    </Columns>
    <PagerContent>
        <MudDataGridPager T="SystemLogDto" PageSizeOptions="_pageSizeOptions" />
    </PagerContent>
</MudDataGrid>
